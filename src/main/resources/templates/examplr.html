<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<div class="col-12">
    <div class="card">
        <h5 class="card-header">Инфографика</h5>
        <div class="card-body">
            <div class="form-repeater">
                <div data-repeater-list="InfographicBuildingPage">
                    <div data-repeater-item>
                        <div class="row">
                            <div class="mb-3 col-lg-6 col-xl-3 col-12 mb-0">
                                <label class="form-label"
                                       for="form-repeater-1-1"></label>
                                <input class="form-control" type="file"
                                       name="imagesInfographic[]" multiple/>
                            </div>
                            <div class="mb-3 col-lg-6 col-xl-3 col-12 mb-0">
                                <label class="form-label"
                                       for="form-repeater-1-2"></label>
                                <input type="text" class="form-control"
                                       placeholder="Описание"
                                       name="descriptionImageInfographic[]" multiple/>
                            </div>
                            <div class="mb-3 col-lg-12 col-xl-2 col-12 d-flex align-items-center mb-0">
                                <button class="btn btn-label-danger mt-4"
                                        data-repeater-delete type="button">
                                    <i class="ti ti-x ti-xs me-1"></i>
                                    <span class="align-middle">Delete</span>
                                </button>
                            </div>
                        </div>
                        <hr/>
                    </div>
                </div>
                <div class="mb-0">
                    <button class="btn btn-primary" data-repeater-create
                            type="button">
                        <i class="ti ti-plus me-1"></i>
                        <span class="align-middle">Add</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="col-12">
    <div class="card">
        <h5 class="card-header">Инфографика</h5>
        <div class="card-body">
            <div class="form-repeater">
                <div data-repeater-list="InfographicInfrastructurePage">
                    <div data-repeater-item>
                        <div class="row">
                            <div class="mb-3 col-lg-6 col-xl-3 col-12 mb-0">
                                <label class="form-label"
                                       for="form-repeater-1-1"></label>
                                <input class="form-control" type="file"
                                       name="imagesInfographicInfrastructure[]" multiple/>
                            </div>
                            <div class="mb-3 col-lg-6 col-xl-3 col-12 mb-0">
                                <label class="form-label"
                                       for="form-repeater-1-2"></label>
                                <input type="text" class="form-control"
                                       placeholder="Описание"
                                       name="descriptionImageInfographicInfrastructure[]" multiple/>
                            </div>
                            <div class="mb-3 col-lg-12 col-xl-2 col-12 d-flex align-items-center mb-0">
                                <button class="btn btn-label-danger mt-4"
                                        data-repeater-delete type="button">
                                    <i class="ti ti-x ti-xs me-1"></i>
                                    <span class="align-middle">Delete</span>
                                </button>
                            </div>
                        </div>
                        <hr/>
                    </div>
                </div>
                <div class="mb-0">
                    <button class="btn btn-primary" data-repeater-create
                            type="button">
                        <i class="ti ti-plus me-1"></i>
                        <span class="align-middle">Add</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    let items = [];
    let nextId = 1;
    const btnAdd = document.querySelector('[data-repeater-create]');

    function addNewItem() {
        let itemHtml = `
                                                    <div data-repeater-item data-id="${nextId}">
                                                        <div class="row">
                                                            <div class="mb-3 col-lg-6 col-xl-3 col-12 mb-0">
                                                                <label class="form-label"></label>
                                                                <input class="form-control" type="file"
                                                                 name="imagesInfographic[]" multiple/>
                                                            </div>
                                                            <div class="mb-3 col-lg-6 col-xl-3 col-12 mb-0">
                                                                <label class="form-label"></label>
                                                                <input type="text" class="form-control" placeholder="Описание"
                                                                name="descriptionImageInfographic[]" multiple/>
                                                            </div>
                                                            <div class="mb-3 col-lg-12 col-xl-2 col-12 d-flex align-items-center mb-0">
                                                                <button class="btn btn-label-danger mt-4" data-repeater-delete type="button">
                                                                    <i class="ti ti-x ti-xs me-1"></i>
                                                                    <span class="align-middle">Delete</span>
                                                                </button>
                                                            </div>
                                                        </div>
                                                        <hr />
                                                    </div>
                                                `;

        document.querySelector('[data-repeater-list]').insertAdjacentHTML('beforeend', itemHtml);

        const newItem = {
            id: nextId++,
            image: '',
            description: ''
        };
        items.push(newItem);
        addDeleteHandler();
    }

    function addDeleteHandler() {
        const deleteBtns = document.querySelectorAll('[data-repeater-delete]');
        deleteBtns.forEach(btn => {
            btn.addEventListener('click', handleDelete);
        });
    }

    function handleDelete() {
        const itemBlock = this.closest('[data-repeater-item]');

        const itemIndex = items.findIndex(item => {
            return item.id === parseInt(itemBlock.dataset.id);
        });
        items.splice(itemIndex, 1);
        itemBlock.remove();
        addDeleteHandler();
    }

    btnAdd.addEventListener('click', addNewItem);
</script>

</body>
</html>